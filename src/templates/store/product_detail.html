{% extends 'base.html' %}

{% block content %}
<div class="product-detail-container animate">
    <div class="detail-image-card">
        {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="detail-image">
        {% else %}
        <div class="detail-image"
            style="height: 500px; background: #f5f5f7; display:flex; align-items:center; justify-content:center; color: #ccc; border-radius: 16px;">
            <span style="font-size: 1.5rem; font-weight: 500;">No Image Available</span>
        </div>
        {% endif %}
    </div>

    <div class="detail-info">
        <span class="product-category" style="font-size: 0.9rem; margin-bottom: 1rem; display: block;">{{
            product.category.name }}</span>
        <h1>{{ product.name }}</h1>
        <div class="detail-price">${{ product.price }}</div>

        <div class="detail-desc">
            <h4 style="color: var(--text-main); margin-bottom: 0.5rem;">Description</h4>
            <p>{{ product.description }}</p>
        </div>

        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary"
                style="padding: 1.25rem; font-size: 1.1rem; width: 100%;">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path
                        d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">
                    </path>
                </svg>
                Add to Shopping Bag
            </a>

            {% if user.is_staff %}
            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                <a href="{% url 'edit_product' product.slug %}" class="btn btn-outline" style="flex: 1;">Edit
                    Details</a>
                <a href="{% url 'delete_product' product.slug %}" class="btn btn-outline"
                    style="color: #ff4d4f; border-color: #ff4d4f; flex: 1;">Remove Product</a>
            </div>
            {% endif %}
        </div>

        <div style="margin-top: 3rem; border-top: 1px solid #eee; padding-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-dim); font-size: 0.9rem;">
                <div
                    style="width: 8px; height: 8px; background: {% if product.stock > 0 %}#52c41a{% else %}#ff4d4f{% endif %}; border-radius: 50%;">
                </div>
                {% if product.stock > 0 %}
                {{ product.stock }} units in stock. Ready to ship.
                {% else %}
                Out of stock.
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}