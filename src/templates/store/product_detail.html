{% extends 'base.html' %}

{% block content %}
<div class="product-detail-container animate">
    <div class="detail-image-card">
        {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="detail-image">
        {% else %}
        <img src="{% static 'images/default_shoe.png' %}" alt="{{ product.name }}" class="detail-image"
            style="opacity: 0.8;">
        {% endif %}
    </div>

    <div class="detail-info">
        <span class="product-category" style="font-size: 0.9rem; margin-bottom: 1.5rem; display: block;">{{
            product.category.name }} Edition</span>
        <h1>{{ product.name }}</h1>
        <div class="detail-price">${{ product.price }}</div>

        <div class="detail-desc"
            style="background: rgba(255,255,255,0.02); padding: 2rem; border-radius: 20px; border: 1px solid var(--glass-border);">
            <h4
                style="color: var(--accent); margin-bottom: 1rem; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.1em;">
                Spec Sheet</h4>
            <p style="color: var(--text-secondary); line-height: 1.8;">{{ product.description }}</p>
        </div>

        <div style="display: flex; gap: 1.5rem; margin-top: 3rem;">
            <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary"
                style="padding: 1.5rem; font-size: 1rem; flex: 2; border-radius: 20px;">
                Authenticate & Add to Bag
            </a>

            <div class="btn btn-outline" style="flex: 0.5; padding: 1.5rem; border-radius: 20px;">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path
                        d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z">
                    </path>
                </svg>
            </div>
        </div>

        {% if user.is_staff %}
        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
            <a href="{% url 'edit_product' product.slug %}" class="btn btn-outline"
                style="flex: 1; font-size: 0.8rem; padding: 1rem;">Modify Entry</a>
            <a href="{% url 'delete_product' product.slug %}" class="btn btn-outline"
                style="color: #ff4d4f; border-color: rgba(255,77,79,0.2); flex: 1; font-size: 0.8rem; padding: 1rem;">Expunge</a>
        </div>
        {% endif %}

        <div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--glass-border);">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div
                    style="width: 12px; height: 12px; background: {% if product.stock > 0 %}var(--accent){% else %}#ff4d4f{% endif %}; border-radius: 50%; box-shadow: 0 0 10px var(--accent-glow);">
                </div>
                <span style="font-weight: 700; font-size: 0.9rem; color: var(--text-secondary);">
                    {% if product.stock > 0 %}
                    IN STOCK: {{ product.stock }} UNITS ALLOCATED
                    {% else %}
                    OUT OF STOCK: BACKORDER ACTIVE
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}